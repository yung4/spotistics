(this.webpackJsonpspotistics=this.webpackJsonpspotistics||[]).push([[0],{49:function(e,t,a){e.exports=a(64)},54:function(e,t,a){},57:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),c=a.n(i),o=(a(54),a(6)),l=a(7),s=a(9),u=a(8),m=a(72),p=a(74),h=a(66),f=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("p",null,"Spotistics is a completely client sided React application that shows your Spotify listening habits. This means that your browser does all the work and that none of your information is being stored on a server. This application does need access to your Spotify account to pull your Spotify data from the Spotify API."),r.a.createElement("p",null,"Even though this type of application has been done before, I always wanted to make my own version. Working on Spotistics has given me good experience with JavaScript, ReactJS, and web development in general."))}}]),a}(n.Component),d=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"Spotistics"),r.a.createElement(m.a,null,r.a.createElement(p.a,null,r.a.createElement(p.a.Header,null,r.a.createElement(m.a.Toggle,{as:h.a,variant:"link",eventKey:"0"},"About")),r.a.createElement(m.a.Collapse,{eventKey:"0"},r.a.createElement(p.a.Body,null,r.a.createElement(f,null))))),r.a.createElement(h.a,{size:"lg",href:"https://accounts.spotify.com/authorize?client_id=ec8137c7bac0479b987d22b38d978bf7&redirect_uri=https://yung4.github.io/spotistics/&scope=user-top-read&response_type=token&show_dialog=true"},"Login to Spotify"))}}]),a}(n.Component),y=a(68),g=a(33),E=a(67),v=a(71),b=a(69),k=a(70),O=(a(57),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).logout=function(){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),i=a[0],c=a[1],o=function(){return c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"link",onClick:function(){return c(!0)}},e.state.userName,r.a.createElement(E.a,{className:"userImg",src:e.state.userImg,width:50,height:50,roundedCircle:!0})),r.a.createElement(v.a,{show:i,onHide:o},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,"Not you?")),r.a.createElement(v.a.Body,null,"Click this to logout!"),r.a.createElement(v.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:o},"Cancel"),r.a.createElement(h.a,{variant:"primary",onClick:e.props.errorFunc},"Logout"))))},e.state={userImg:"",userName:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){try{this.setState({userImg:this.props.user.images[0].url}),this.setState({userName:this.props.user.display_name})}catch(e){}}},{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&this.componentDidMount()}},{key:"render",value:function(){return r.a.createElement(y.a,{fluid:!0,className:"header"},r.a.createElement(y.a,null,r.a.createElement(b.a,null,r.a.createElement(k.a,{className:"my-auto"},r.a.createElement("h1",null,"Spotistics")),r.a.createElement(k.a,{className:"logout"},r.a.createElement(this.logout,null)))))}}]),a}(n.Component)),j=a(73),S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{fill:!0,justify:!0,variant:"tabs",defaultActiveKey:0,onSelect:function(t){return e.props.setView(t)}},r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:0},r.a.createElement("h2",null," Top Artists "))),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:1},r.a.createElement("h2",null," Top Tracks "))),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:2,disabled:!0},r.a.createElement("h2",null,"Statistics"))))}}]),a}(n.Component),T=a(75),w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("h2",null," sorry, this is currently a work in progress. pls come back later! ")}}]),a}(n.Component),C=(a(60),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(T.a.Item,{action:!0,target:"_blank",href:this.props.artist.href,style:{padding:5}},r.a.createElement(b.a,null,r.a.createElement(k.a,{xs:1,className:"my-auto",style:{textAlign:"right"}},r.a.createElement("h3",null,this.props.artist.id)),r.a.createElement(E.a,{src:this.props.artist.images[2].url,height:50,width:50,roundedCircle:!0}),r.a.createElement(k.a,{className:"my-auto"},r.a.createElement("h3",{style:{fontSize:20}}," ",this.props.artist.title," "),r.a.createElement("p",{style:{margin:0}}," ",this.props.artist.genres," "))))}}]),a}(n.Component)),A=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return this.props.topArtists.map((function(e){return r.a.createElement(C,{key:e.id,artist:e})}))}}]),a}(n.Component),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).openLink=function(){console.log(e.props.track)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(T.a.Item,{action:!0,target:"_blank",href:this.props.track.href,style:{padding:5}},r.a.createElement(b.a,null,r.a.createElement(k.a,{xs:1,className:"my-auto",style:{textAlign:"right"}},r.a.createElement("h3",null,this.props.track.id)),r.a.createElement(E.a,{src:this.props.track.images[2].url,height:50,width:50,roundedCircle:!0}),r.a.createElement(k.a,{className:"my-auto"},r.a.createElement("h3",{style:{fontSize:20}}," ",this.props.track.title," "),r.a.createElement("p",{style:{margin:0,fontSize:16}},this.props.track.artistName," - ",this.props.track.albumTitle))))}}]),a}(n.Component),F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return this.props.topTracks.map((function(e){return r.a.createElement(I,{key:e.id,track:e})}))}}]),a}(n.Component),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{className:"justify-content-center",variant:"pills",defaultActiveKey:this.props.timeRange,onSelect:function(t){return e.props.updateTimeRangeState(t)}},r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:"short_term"},"1 Month")),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:"medium_term"},"6 Months")),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Link,{eventKey:"long_term"},"All Time")))}}]),a}(n.Component),N=a(39),x=a.n(N),_=a(47),M=a(48),D=a.n(M);function K(e){var t=[];return"user"===e.type?e:("artist"===(e=e.items)[0].type?t=function(e){for(var t=[],a=0;a<e.length;a++)t[a]={id:a+1,title:e[a].name,href:e[a].uri,images:e[a].images,genres:L(e[a].genres),type:e[a].type};return t}(e):"track"===e[0].type?t=function(e){for(var t=[],a=0;a<e.length;a++)t[a]={id:a+1,title:e[a].name,artistName:e[a].artists[0].name,albumTitle:e[a].album.name,href:e[a].uri,images:e[a].album.images,releaseDate:e[a].album.release_date,rank:a,type:e[a].type};return t}(e):console.log("error"),t)}function L(e){var t=e.length,a="";if(0===t)return" ";if(1===t)return e[0].toString();for(var n=0;n<t;n++)a+=e[n],n+1<t&&(a+=", ");return a}function B(e,t){return z.apply(this,arguments)}function z(){return(z=Object(_.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.spotify.com/v1/me",n=[],e.next=4,D.a.ajax({url:"https://api.spotify.com/v1/me"+a,headers:{Authorization:"Bearer "+t},success:function(e){n=K(e)}});case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tracks",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium_term",n=50,r=0,i="/top/"+t+"?time_range="+a+"&limit="+n+"&offset="+r;return B(e,i)}var J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).updateTimeRangeState=function(t){e.setState({timeRange:t})},e.state={topArtists:[],topTracks:[],timeRange:"short_term"},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hashFragment.accessToken;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium_term",a="artists";return H(e,a,t)})(t,this.state.timeRange).then((function(t){return e.setState({topArtists:t})})).catch(this.props.errorFunc),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium_term",a="tracks";return H(e,a,t)}(t,this.state.timeRange).then((function(t){return e.setState({topTracks:t})})).catch(this.props.errorFunc)}},{key:"componentDidUpdate",value:function(e,t){t.timeRange!==this.state.timeRange&&(console.log(this.state.artistTimeRange),this.componentDidMount())}},{key:"render",value:function(){return 0==this.props.contentType?r.a.createElement(T.a,{variant:"flush"},r.a.createElement(T.a.Item,null,r.a.createElement(R,{timeRange:this.state.timeRange,updateTimeRangeState:this.updateTimeRangeState})),r.a.createElement(A,{topArtists:this.state.topArtists})):1==this.props.contentType?r.a.createElement(T.a,{variant:"flush"},r.a.createElement(T.a.Item,null,r.a.createElement(R,{timeRange:this.state.timeRange,updateTimeRangeState:this.updateTimeRangeState})),r.a.createElement(F,{topTracks:this.state.topTracks})):r.a.createElement("div",null,r.a.createElement("h1",null,"Statistics"),r.a.createElement(w,null))}}]),a}(n.Component),V=(a(62),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).aboutModal=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],i=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){return i(!0)}},"about"),r.a.createElement(v.a,{show:a,onHide:function(){return i(!1)}},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,"About")),r.a.createElement(v.a.Body,null,r.a.createElement(f,null))))},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,{fluid:!0,className:"footer"},r.a.createElement(b.a,null,r.a.createElement(k.a,null,r.a.createElement("p",null,"Made by Christopher Yung")),r.a.createElement(k.a,null,r.a.createElement("a",{target:"_blank",href:"https://github.com/yung4/spotistics"},"github repo")),r.a.createElement(k.a,null,r.a.createElement(this.aboutModal,null))))}}]),a}(n.Component)),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).errorFunc=function(e){console.log(e),window.location.replace("https://yung4.github.io/spotistics/")},e.setView=function(t){e.setState({contentType:t})},e.state={contentType:0,user:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.hashFragment.accessToken,B(e,"")).then((function(e){t.setState({user:e})})).catch(this.errorFunc)}},{key:"componentDidUpdate",value:function(e,t){t.contentType!==this.state.contentType&&this.componentDidMount()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,{user:this.state.user,errorFunc:this.errorFunc}),r.a.createElement(y.a,null,r.a.createElement(S,{setView:this.setView}),r.a.createElement(J,{hashFragment:this.props.hashFragment,contentType:this.state.contentType,errorFunc:this.errorFunc})),r.a.createElement(V,null))}}]),a}(n.Component),P={};function W(){var e=window.location.href;if(-1===e.indexOf("#"))return!1;console.log(e);var t=e.slice(e.indexOf("#"));console.log(t);var a=t.split("&");console.log(a);try{P.accessToken=a[0].slice(a[0].indexOf("=")+1),P.tokenType=a[1].slice(a[1].indexOf("=")+1),P.expiresIn=a[2].slice(a[2].indexOf("=")+1)}catch(n){return console.log(n),!1}return!0}var Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={loggedInStatus:!1,hashFragment:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({loggedInStatus:W()}),this.setState({hashFragment:P})}},{key:"render",value:function(){return console.log(this.state),this.state.loggedInStatus?r.a.createElement("div",{className:"App"},r.a.createElement(U,{hashFragment:this.state.hashFragment})):r.a.createElement("div",{className:"App"},r.a.createElement(d,null))}}]),a}(n.Component);a(63);c.a.render(r.a.createElement(Y,null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.62aad381.chunk.js.map