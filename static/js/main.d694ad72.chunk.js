(this.webpackJsonpspotistics=this.webpackJsonpspotistics||[]).push([[0],{10:function(t,e,n){t.exports=n(17)},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(7),s=n.n(i),c=(n(15),n(1)),o=n(2),u=n(4),l=n(3),p=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("a",{className:"App-link",href:"https://accounts.spotify.com/authorize?client_id=ec8137c7bac0479b987d22b38d978bf7&redirect_uri=http://localhost:3000&scope=user-top-read&response_type=token&show_dialog=true"},"Login to Spotify"))}}]),n}(r.Component),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).state={userImg:"",userName:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){try{this.setState({userImg:this.props.user.images[0].url}),this.setState({userName:this.props.user.display_name})}catch(t){}}},{key:"componentDidUpdate",value:function(t,e){t.user!==this.props.user&&this.componentDidMount()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h1",null,"Spotistics")),a.a.createElement("div",null,a.a.createElement("img",{src:this.state.userImg,width:50,height:50,alt:"User Profile"}),a.a.createElement("p",null,"logged in as ",this.state.userName)),a.a.createElement("button",{onClick:this.props.artistView},"'Artists'"),a.a.createElement("button",{onClick:this.props.trackView},"'Tracks'"),a.a.createElement("button",{onClick:this.props.statsView},"'Statistics'"))}}]),n}(r.Component),h=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("h2",null," sorry, this is currently a work in progress. pls come back later! ")}}]),n}(r.Component),f=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("img",{src:this.props.artist.images[1].url,alt:this.props.artist.title+" image",height:"150",width:"150"}),a.a.createElement("h3",null," ",this.props.artist.title," "),a.a.createElement("p",null," ",this.props.artist.genres," "))}}]),n}(r.Component),d=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return this.props.topArtists.map((function(t){return a.a.createElement(f,{key:t.id,artist:t})}))}}]),n}(r.Component),g=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("img",{src:this.props.track.images[2].url,alt:this.props.track.title+" image"}),a.a.createElement("h3",null," ",this.props.track.title," "),a.a.createElement("p",null," ",this.props.track.artistName," "))}}]),n}(r.Component),v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return this.props.topTracks.map((function(t){return a.a.createElement(g,{key:t.id,track:t})}))}}]),n}(r.Component),b=n(5),k=n.n(b),y=n(8),E=n(9),O=n.n(E);function j(t){var e=[];return"user"===t.type?t:("artist"===(t=t.items)[0].type?e=function(t){for(var e=[],n=0;n<t.length;n++)e[n]={id:t[n].id,title:t[n].name,href:t[n].href,images:t[n].images,genres:T(t[n].genres),type:t[n].type};return e}(t):"track"===t[0].type?e=function(t){for(var e=[],n=0;n<t.length;n++)e[n]={id:t[n].id,title:t[n].name,artistName:t[n].artists[0].name,albumTitle:t[n].album.name,href:t[n].external_urls[0],images:t[n].album.images,releaseDate:t[n].album.release_date,type:t[n].type};return e}(t):console.log("error"),e)}function T(t){var e=t.length,n="";if(1===e)return t[0].toString();for(var r=0;r<e;r++)n+=t[r],r+1<e&&(n+=", ");return n}function w(t,e){return S.apply(this,arguments)}function S(){return(S=Object(y.a)(k.a.mark((function t(e,n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.spotify.com/v1/me",r=[],t.next=4,O.a.ajax({url:"https://api.spotify.com/v1/me"+n,headers:{Authorization:"Bearer "+e},success:function(t){console.log(t),r=j(t)}});case 4:return t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tracks",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium_term",r=50,a=0,i="/top/"+e+"?time_range="+n+"&limit="+r+"&offset="+a;return w(t,i)}var _=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).updateArtistTimeRangeState=function(e){t.setState({artistTimeRange:e})},t.updateTrackTimeRangeState=function(e){t.setState({trackTimeRange:e})},t.state={topArtists:[],topTracks:[],artistTimeRange:"short_term",trackTimeRange:"short_term"},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.hashFragment.accessToken;(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium_term",n="artists";return C(t,n,e)})(e,this.state.artistTimeRange).then((function(e){return t.setState({topArtists:e})})).catch(this.props.errorFunc),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium_term",n="tracks";return C(t,n,e)}(e,this.state.trackTimeRange).then((function(e){return t.setState({topTracks:e})})).catch(this.props.errorFunc)}},{key:"componentDidUpdate",value:function(t,e){e.artistTimeRange===this.state.artistTimeRange&&e.trackTimeRange===this.state.trackTimeRange||(console.log(this.state.artistTimeRange),this.componentDidMount())}},{key:"render",value:function(){var t=this;return 0===this.props.contentType?a.a.createElement("div",null,a.a.createElement("h1",null,"Top Artists"),a.a.createElement("button",{onClick:function(){return t.updateArtistTimeRangeState("short_term")}},"1 month"),a.a.createElement("button",{onClick:function(){return t.updateArtistTimeRangeState("medium_term")}},"6 months"),a.a.createElement("button",{onClick:function(){return t.updateArtistTimeRangeState("long_term")}},"All time"),a.a.createElement(d,{topArtists:this.state.topArtists})):1===this.props.contentType?a.a.createElement("div",null,a.a.createElement("h1",null,"Top Tracks"),a.a.createElement("button",{onClick:function(){return t.updateTrackTimeRangeState("short_term")}},"1 month"),a.a.createElement("button",{onClick:function(){return t.updateTrackTimeRangeState("medium_term")}},"6 months"),a.a.createElement("button",{onClick:function(){return t.updateTrackTimeRangeState("long_term")}},"All time"),a.a.createElement(v,{topTracks:this.state.topTracks})):a.a.createElement("div",null,a.a.createElement("h1",null,"Statistics"),a.a.createElement(h,null))}}]),n}(r.Component),R=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",null,"Made by Christopher Yung"),a.a.createElement("p",null,"github repo")))}}]),n}(r.Component),A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).errorFunc=function(t){console.log(t),window.location.replace("http://localhost:3000")},t.artistView=function(){t.setState({contentType:0}),console.log("showing artists")},t.trackView=function(){t.setState({contentType:1}),console.log("showing tracks")},t.statsView=function(){t.setState({contentType:2}),console.log("showing stats")},t.state={contentType:0,user:{}},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t,e=this;(t=this.props.hashFragment.accessToken,w(t,"")).then((function(t){e.setState({user:t}),console.log(e.state.user)})).catch(this.errorFunc)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(m,{artistView:this.artistView,trackView:this.trackView,statsView:this.statsView,user:this.state.user}),a.a.createElement(_,{hashFragment:this.props.hashFragment,contentType:this.state.contentType,errorFunc:this.errorFunc}),a.a.createElement(R,null))}}]),n}(r.Component),F={};function V(){var t=window.location,e=t.href,n=t.origin,r=e.slice(n.length+1);if("?error=access_denied"===r||""===r)return!1;var a=r.split("&");return F.accessToken=a[0].slice(a[0].indexOf("=")+1),F.tokenType=a[1].slice(a[1].indexOf("=")+1),F.expiresIn=a[2].slice(a[2].indexOf("=")+1),!0}var x=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).state={loggedInStatus:V(),hashFragment:F},t}return Object(o.a)(n,[{key:"render",value:function(){return console.log(this.state),this.state.loggedInStatus?a.a.createElement("div",{className:"App"},a.a.createElement(A,{hashFragment:this.state.hashFragment})):a.a.createElement("div",{className:"App"},a.a.createElement(p,null))}}]),n}(r.Component);s.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.d694ad72.chunk.js.map